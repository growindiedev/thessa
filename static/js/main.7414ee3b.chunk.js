(this.webpackJsonpthessa=this.webpackJsonpthessa||[]).push([[0],{130:function(e,t,c){},131:function(e,t,c){"use strict";c.r(t);var a=c(1),s=c(95),n=c.n(s),r=c(5),i=c(35),j=c.n(i),o=c(49),d=c(98),l=c(21),u=c(31),b=c.n(u),O=c(96),h=(c(93),c(86),O.a.initializeApp({apiKey:"AIzaSyBjabCNLs_V8yYyOd5rt1w2lud--6KMW6Q",authDomain:"thessa-26121999.firebaseapp.com",projectId:"thessa-26121999",storageBucket:"thessa-26121999.appspot.com",messagingSenderId:"995634909167",appId:"1:995634909167:web:c781c1ef0a766f467af01a",measurementId:"G-SVREXW771C"})),x=h.auth(),p=c(3),m=function(e){var t=e.projects,c=e.setProject,a=e.showOverlay,s=e.setShowOverlay;return t&&a&&Object(p.jsx)("div",{className:"project-overlay",children:Object(p.jsx)("ul",{className:"project-overlay__list",children:t.map((function(e){return Object(p.jsx)("li",{onClick:function(){c(e.projectId),s(!1)},children:e.name},e.projectId)}))})})},f=function(e){var t=e.setTaskDate,c=e.showTaskDate,a=e.setShowTaskDate;return c&&Object(p.jsx)("div",{className:"task-date",children:Object(p.jsxs)("ul",{className:"task-date__list",children:[Object(p.jsxs)("li",{onClick:function(){a(!1),t(b()().format("DD/MM/YYYY"))},children:[Object(p.jsx)("span",{children:Object(p.jsx)(l.h,{})}),Object(p.jsx)("span",{children:"Today"})]}),Object(p.jsxs)("li",{onClick:function(){a(!1),t(b()().add(1,"day").format("DD/MM/YYYY"))},children:[Object(p.jsx)("span",{children:Object(p.jsx)(l.i,{})}),Object(p.jsx)("span",{children:"Tomorrow"})]}),Object(p.jsxs)("li",{onClick:function(){a(!1),t(b()().add(7,"days").format("DD/MM/YYYY"))},children:[Object(p.jsx)("span",{children:Object(p.jsx)(l.f,{})}),Object(p.jsx)("span",{children:"Next week"})]})]})})},v=c(40),k=[{key:"INBOX",name:"Inbox"},{key:"TODAY",name:"Today"},{key:"NEXT_7",name:"Next 7 days"}],g=function(e){return k.find((function(t){return t.key===e}))},w=c(15),_=Object(a.createContext)(),y=function(e){var t=e.children,c=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),c=t[0],s=t[1],n=D().currentUser,i=Object(w.g)();return Object(a.useEffect)((function(){if(!n)return i.push("/authenticate"),{projects:c,setProjects:s};h.firestore().collection("projects").where("userId","==",n.uid).orderBy("projectId").get().then((function(e){var t=e.docs.map((function(e){return Object(v.a)(Object(v.a)({},e.data()),{},{docId:e.id})}));JSON.stringify(t)!==JSON.stringify(c)&&s(t)}))}),[c,n]),{projects:c,setProjects:s}}(),s=c.projects,n=c.setProjects;return Object(p.jsx)(_.Provider,{value:{projects:s,setProjects:n},children:t})},N=function(){return Object(a.useContext)(_)},S=Object(a.createContext)(),C=function(e){var t=e.children,c=Object(a.useState)("INBOX"),s=Object(r.a)(c,2),n=s[0],i=s[1];return Object(p.jsx)(S.Provider,{value:{selectedProject:n,setSelectedProject:i},children:t})},P=function(){return Object(a.useContext)(S)},I=Object(a.createContext)();function D(){return Object(a.useContext)(I)}var Y=function(e){var t=e.children,c=Object(a.useState)(null),s=Object(r.a)(c,2),n=s[0],i=s[1],j=Object(a.useState)(!0),o=Object(r.a)(j,2),d=o[0],l=o[1];Object(a.useEffect)((function(){x.onAuthStateChanged((function(e){i(e),l(!1)}))}),[]);var u={currentUser:n,login:function(e,t){return x.signInWithEmailAndPassword(e,t)},signup:function(e,t){return x.createUserWithEmailAndPassword(e,t)},logout:function(){return x.signOut()},resetPassword:function(e){return x.sendPasswordResetEmail(e)},updateEmail:function(e){return n.updateEmail(e)},updatePassword:function(e){return n.updatePassword(e)}};return Object(p.jsx)(I.Provider,{value:u,children:!d&&t})},T=function(e){var t=e.showAddTaskMain,c=void 0===t||t,s=e.shouldShowMain,n=void 0!==s&&s,i=e.showQuickAddTask,j=e.setShowQuickAddTask,o=Object(a.useState)(""),d=Object(r.a)(o,2),u=d[0],O=d[1],x=Object(a.useState)(""),v=Object(r.a)(x,2),k=v[0],g=v[1],w=Object(a.useState)(""),_=Object(r.a)(w,2),y=_[0],S=_[1],C=Object(a.useState)(n),I=Object(r.a)(C,2),Y=I[0],T=I[1],M=Object(a.useState)(!1),A=Object(r.a)(M,2),E=A[0],X=A[1],B=Object(a.useState)(!1),U=Object(r.a)(B,2),R=U[0],q=U[1],J=N().projects,Q=P().selectedProject,K=D().currentUser;return Object(p.jsxs)("div",{className:i?"add-task add-task__overlay":"add-task","data-testid":"add-task",children:[c&&Object(p.jsxs)("div",{className:"add-task__shallow",onClick:function(){return T(!Y)},children:[Object(p.jsx)("span",{className:"add-task__plus",children:"+"}),Object(p.jsx)("span",{className:"add-task__text",children:"Add Task"})]}),(Y||i)&&Object(p.jsxs)("div",{className:"add-task__main",children:[i&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h2",{className:"header",children:"Quick Add Task"}),Object(p.jsx)("span",{className:"add-task__cancel-x",onClick:function(){T(!1),X(!1),j(!1)},children:"X"})]}),Object(p.jsx)(m,{projects:J,setProject:S,showOverlay:E,setShowOverlay:X}),Object(p.jsx)(f,{setTaskDate:g,showTaskDate:R,setShowTaskDate:q}),Object(p.jsx)("input",{className:"add-task__content",type:"text",value:u,onChange:function(e){return O(e.target.value)}}),Object(p.jsx)("button",{type:"button",className:"add-task__submit",onClick:function(){return function(){var e=y||Q,t="";return"TODAY"===e?t=b()().format("DD/MM/YYYY"):"NEXT_7"===e&&(t=b()().add(7,"days").format("DD/MM/YYYY")),u&&e&&h.firestore().collection("tasks").add({archived:!1,projectId:e,task:u,date:t||k,userId:K.uid}).then((function(){O(""),S(""),T(""),X(!1),i&&j&&j(!1)}))}()},children:"Add Task"}),!i&&Object(p.jsx)("span",{className:"add-task__cancel",onClick:function(){T(!1),X(!1)},children:"Cancel"}),Object(p.jsx)("span",{className:"add-task__project",onClick:function(){return X(!E)},children:Object(p.jsx)(l.e,{})}),Object(p.jsx)("span",{className:"add-task__date",onClick:function(){return q(!R)},children:Object(p.jsx)(l.d,{})})]})]})},M=function(e){var t=e.darkMode,c=e.setDarkMode,s=Object(a.useState)(!1),n=Object(r.a)(s,2),i=n[0],u=n[1],b=Object(a.useState)(!1),O=Object(r.a)(b,2),h=O[0],x=O[1],m=D(),f=m.currentUser,v=m.logout,k=Object(w.g)();function g(){return(g=Object(o.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v();case 3:k.push("/authenticate"),console.log("user",f.uid),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("failed to logout");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(p.jsxs)("header",{className:"header","data-testid":"header",children:[Object(p.jsxs)("nav",{children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsx)("img",{src:"/images/new.png",alt:"Thessa"})}),Object(p.jsx)("div",{className:"settings",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{className:"settings__add","data-testid":"quick-add-task-action",onClick:function(){x(!0),u(!0)},children:"+"}),Object(p.jsx)("li",{"data-testid":"dark-mode-action",className:"settings__dark-mode",onClick:function(){return c(!t)},children:Object(p.jsx)(d.a,{})}),Object(p.jsx)("li",{className:"user__status",onClick:function(){return g.apply(this,arguments)},children:Object(p.jsx)("div",{children:Object(p.jsx)(l.g,{})})})]})})]}),Object(p.jsx)(T,{showAddTaskMain:!1,shouldShowMain:i,showQuickAddTask:h,setShowQuickAddTask:x})]})},A=c(19),E=function(e){var t=e.project,c=Object(a.useState)(!1),s=Object(r.a)(c,2),n=s[0],i=s[1],j=N(),o=j.projects,d=j.setProjects,u=P().setSelectedProject;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{className:"sidebar__dot",children:"\u2022"}),Object(p.jsx)("span",{className:"sidebar__project-name",children:t.name}),Object(p.jsxs)("span",{className:"sidebar__project-delete","data-testid":"delete-project",onClick:function(){return i(!n)},onKeyDown:function(e){"Enter"===e.key&&i(!n)},tabIndex:0,role:"button","aria-label":"Confirm deletion of project",children:[Object(p.jsx)(l.j,{}),n&&Object(p.jsx)("div",{className:"project-delete-modal",children:Object(p.jsxs)("div",{className:"project-delete-modal__inner",children:[Object(p.jsx)("p",{children:"Are you sure you want to delete this project?"}),Object(p.jsx)("button",{type:"button",onClick:function(){return e=t.docId,void h.firestore().collection("projects").doc(e).delete().then((function(){d(Object(A.a)(o)),u("INBOX")}));var e},children:"Delete"}),Object(p.jsx)("span",{onClick:function(){return i(!n)},onKeyDown:function(e){"Enter"===e.key&&i(!n)},tabIndex:0,role:"button","aria-label":"Cancel adding project, do not delete",children:"Cancel"})]})})]})]})},X=function(e){var t=e.activeValue,c=void 0===t?null:t,s=Object(a.useState)(c),n=Object(r.a)(s,2),i=n[0],j=n[1],o=P().setSelectedProject,d=N().projects;return d&&d.map((function(e){return Object(p.jsx)("li",{"data-doc-id":e.docId,"data-testid":"project-action",className:i===e.projectId?"active sidebar__project":"sidebar__project",onKeyDown:function(){j(e.projectId),o(e.projectId)},onClick:function(){j(e.projectId),o(e.projectId)},children:Object(p.jsx)(E,{project:e})},e.projectId)}))},B=c(151),U=function(e){e.projects;var t=e.setProjects,c=Object(a.useState)(!1),s=Object(r.a)(c,2),n=s[0],i=s[1],j=Object(a.useState)(""),o=Object(r.a)(j,2),d=o[0],l=o[1],u=Object(B.a)(),b=D().currentUser;return Object(p.jsxs)("div",{className:"add-project",children:[n&&Object(p.jsxs)("div",{className:"add-project__input",children:[Object(p.jsx)("input",{value:d,onChange:function(e){return l(e.target.value)},className:"add-project__name",type:"text",placeholder:"Name your project"}),Object(p.jsx)("button",{className:"add-project__submit",type:"button",onClick:function(){return d&&h.firestore().collection("projects").add({projectId:u,name:d,userId:b.uid}).then((function(){t([]),l(""),i(!1)}))},children:"Add Project"}),Object(p.jsx)("span",{className:"add-project__cancel",onClick:function(){return i(!1)},children:"Cancel"})]}),Object(p.jsx)("span",{className:"add-project__plus",children:"+"}),Object(p.jsx)("span",{className:"add-project__text",onClick:function(){return i(!n)},children:"Add Project"})]})},R=function(){var e=P().setSelectedProject,t=N(),c=t.projects,s=t.setProjects,n=Object(a.useState)("inbox"),i=Object(r.a)(n,2),j=i[0],o=i[1],d=Object(a.useState)(!0),u=Object(r.a)(d,2),b=u[0],O=u[1];return Object(p.jsxs)("div",{className:"sidebar","data-testid":"sidebar",children:[Object(p.jsxs)("ul",{className:"sidebar__generic",children:[Object(p.jsxs)("li",{"data-testid":"inbox",className:"inbox"===j?"active":void 0,onClick:function(){o("inbox"),e("INBOX")},children:[Object(p.jsx)("span",{children:Object(p.jsx)(l.b,{})}),Object(p.jsx)("span",{children:"Inbox"})]}),Object(p.jsxs)("li",{"data-testid":"today",className:"today"===j?"active":void 0,onClick:function(){o("today"),e("TODAY")},children:[Object(p.jsx)("span",{children:Object(p.jsx)(l.c,{})}),Object(p.jsx)("span",{children:"Today"})]}),Object(p.jsxs)("li",{"data-testid":"next_7",className:"next_7"===j?"active":void 0,onClick:function(){o("next_7"),e("NEXT_7")},children:[Object(p.jsx)("span",{children:Object(p.jsx)(l.d,{})}),Object(p.jsx)("span",{children:"Next 7 days"})]})]}),Object(p.jsxs)("div",{className:"sidebar__middle",onClick:function(){return O(!b)},children:[Object(p.jsx)("span",{children:Object(p.jsx)(l.a,{className:b?void 0:"hidden-projects"})}),Object(p.jsx)("h2",{children:"Projects"})]}),b&&Object(p.jsx)(X,{}),Object(p.jsx)("ul",{className:"sidebar__projects",children:b&&Object(p.jsx)(U,{projects:c,setProjects:s})})]})},q=function(e){var t=e.id;return Object(p.jsx)("div",{className:"checkbox-holder","data-testid":"checkbox-action",onClick:function(){h.firestore().collection("tasks").doc(t).update({archived:!0})},children:Object(p.jsx)("span",{className:"checkbox"})})},J=function(){var e=P().selectedProject,t=N().projects,c=function(e){var t=Object(a.useState)([]),c=Object(r.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)([]),j=Object(r.a)(i,2),o=j[0],d=j[1],l=D().currentUser;return Object(a.useEffect)((function(){var t=h.firestore().collection("tasks").where("userId","==",l.uid);return t=(t=e&&!g(e)?t=t.where("projectId","==",e):"TODAY"===e?t=t.where("date","==",b()().format("DD/MM/YYYY")):"INBOX"===e||0===e?t=t.where("date","==",""):t).onSnapshot((function(t){var c=t.docs.map((function(e){return Object(v.a)({id:e.id},e.data())}));n("NEXT_7"===e?c.filter((function(e){return b()(e.date,"DD-MM-YYYY").diff(b()(),"days")<=7&&!0!==e.archived})):c.filter((function(e){return!0!==e.archived}))),d(c.filter((function(e){return!1!==e.archived})))})),function(){return t()}}),[e,l]),{tasks:s,archivedTasks:o}}(e).tasks,s="";return g(e)&&e&&(s=function(e,t){return e.find((function(e){return e.key===t}))}(k,e).name),t&&t.length>0&&e&&!g(e)&&(s=function(e,t){return e.find((function(e){return e.projectId===t}))}(t,e).name),Object(a.useEffect)((function(){document.title="".concat(s)})),Object(p.jsxs)("div",{className:"tasks","data-testid":"tasks",children:[Object(p.jsx)("h2",{"data-testid":"project-name",children:s}),Object(p.jsx)("ul",{className:"tasks__list",children:c.map((function(e){return Object(p.jsxs)("li",{children:[Object(p.jsx)(q,{id:e.id,taskDesc:e.task}),Object(p.jsx)("span",{children:e.task})]},"".concat(e.id))}))}),Object(p.jsx)(T,{})]})},Q=function(){return Object(p.jsxs)("section",{className:"content",children:[Object(p.jsx)(R,{}),Object(p.jsx)(J,{})]})},K=c(132),V=c(148),W=c(157),F=c(150),L=c(154),z=c(108),G=c(143),H=c(144),Z=c(155),$=c(152),ee=c(156),te=c(147),ce=c(145),ae=c(146),se=c(72),ne=function(){var e=D().signup,t=Object(a.useState)(""),c=Object(r.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)(!1),d=Object(r.a)(i,2),l=d[0],u=d[1],b=Object(a.useState)(""),O=Object(r.a)(b,2),h=(O[0],O[1],Object(w.g)()),x=Object(se.a)({initialValues:{email:"",password:"",confirmPassword:""},onSubmit:function(){var t=Object(o.a)(j.a.mark((function t(c){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x.values.password===x.values.confirmPassword){t.next=2;break}return t.abrupt("return",n("Passwords do not match"));case 2:return t.prev=2,n(""),u(!0),t.next=7,e(x.values.email,x.values.password);case 7:h.push("/"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),n(t.t0.message),u(!1);case 14:u(!1);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()});return Object(p.jsx)("form",{onSubmit:x.handleSubmit,children:Object(p.jsxs)(L.a,{spacing:3,children:[Object(p.jsx)(z.a,{isRequired:!0,children:Object(p.jsxs)(G.a,{children:[Object(p.jsx)(H.a,{children:Object(p.jsx)(ce.a,{})}),Object(p.jsx)(Z.a,{type:"email",name:"email",placeholder:"Email","aria-lable":"Email",onChange:x.handleChange,value:x.values.email,bg:"white"})]})}),Object(p.jsx)(z.a,{isRequired:!0,children:Object(p.jsxs)(G.a,{children:[Object(p.jsx)(H.a,{children:Object(p.jsx)(ae.a,{})}),Object(p.jsx)(Z.a,{type:"password",name:"password",placeholder:"Password","aria-lable":"Password",onChange:x.handleChange,value:x.values.password,bg:"white"})]})}),Object(p.jsx)(z.a,{isRequired:!0,children:Object(p.jsxs)(G.a,{children:[Object(p.jsx)(H.a,{children:Object(p.jsx)(ae.a,{})}),Object(p.jsx)(Z.a,{type:"password",name:"confirmPassword",placeholder:"confirm password","aria-lable":"confirmPassword",onChange:x.handleChange,value:x.values.confirmPassword,bg:"white"})]})}),Object(p.jsx)($.a,{type:"submit",boxShadow:"sm",_hover:{boxShadow:"md"},_active:{boxShadow:"lg"},disabled:l,children:"Sign up!"}),s?Object(p.jsxs)(ee.a,{status:"error",variant:"top-accent",children:[s,Object(p.jsx)(te.a,{position:"static",right:"8px",top:"8px",onClick:function(){return n(!1)}})]}):Object(p.jsx)(z.b,{textAlign:"center",color:"grey",children:"Created by Jarryingnut \ud83d\udc68\u200d\ud83d\udcbb"})]})})},re=function(){var e=D().login,t=Object(a.useState)(""),c=Object(r.a)(t,2),s=c[0],n=c[1],i=Object(a.useState)(!1),d=Object(r.a)(i,2),l=d[0],u=d[1],b=Object(a.useState)(""),O=Object(r.a)(b,2),h=(O[0],O[1],Object(w.g)()),x=Object(se.a)({initialValues:{email:"",password:""},onSubmit:function(){var t=Object(o.a)(j.a.mark((function t(c){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(""),u(!0),t.next=5,e(x.values.email,x.values.password);case 5:u(!1),h.push("/"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),n("Wrong email or password"),u(!1);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()});return Object(p.jsx)("form",{onSubmit:x.handleSubmit,children:Object(p.jsxs)(L.a,{spacing:3,children:[Object(p.jsx)(z.a,{isRequired:!0,children:Object(p.jsxs)(G.a,{children:[Object(p.jsx)(H.a,{children:Object(p.jsx)(ce.a,{})}),Object(p.jsx)(Z.a,{type:"email",name:"email",placeholder:"Email","area-lable":"Email",onChange:x.handleChange,value:x.values.email,bg:"white"})]})}),Object(p.jsx)(z.a,{isRequired:!0,children:Object(p.jsxs)(G.a,{children:[Object(p.jsx)(H.a,{children:Object(p.jsx)(ae.a,{})}),Object(p.jsx)(Z.a,{type:"password",placeholder:"Password","aria-lable":"Password",name:"password",onChange:x.handleChange,value:x.values.password,bg:"white"})]})}),Object(p.jsx)($.a,{type:"submit",boxShadow:"sm",_hover:{boxShadow:"md"},_active:{boxShadow:"lg"},disabled:l,children:"Login"}),s?Object(p.jsxs)(ee.a,{status:"error",variant:"top-accent",children:[Object(p.jsx)(ee.b,{children:s}),Object(p.jsx)(te.a,{position:"absolute",right:"8px",top:"8px",onClick:function(){return n(!1)}})]}):Object(p.jsx)(z.b,{textAlign:"center",color:"grey",children:"Created by Jarryingnut \ud83d\udc68\u200d\ud83d\udcbb"})]})})},ie=function(){var e=Object(K.b)().colorMode;return document.title="Thessa \ud83d\udc65",Object(p.jsxs)(V.a,{bg:"light"===e?"gray.200":"gray.600",w:"350px",p:3,boxShadow:"m",rounded:"lg",children:[Object(p.jsx)(W.a,{src:"/images/formlogo.png",w:"100px",mx:"auto",mt:12,mb:10}),Object(p.jsxs)(F.e,{variant:"enclosed-colored",isFitted:!0,m:4,children:[Object(p.jsxs)(F.b,{children:[Object(p.jsx)(F.a,{children:"Sign Up"}),Object(p.jsx)(F.a,{children:"Login"})]}),Object(p.jsxs)(F.d,{mt:3,children:[Object(p.jsx)(F.c,{children:Object(p.jsx)(ne,{})}),Object(p.jsx)(F.c,{children:Object(p.jsx)(re,{})})]})]})]})},je=c(103);function oe(e){var t=e.component,c=(e.children,Object(je.a)(e,["component","children"])),a=D().currentUser;return Object(p.jsx)(w.b,Object(v.a)(Object(v.a)({},c),{},{render:function(e){return a?Object(p.jsx)(t,Object(v.a)({},e)):Object(p.jsx)(w.a,{to:"/login"})}}))}var de=c(41),le=c(153),ue=c(149),be=function(e){var t=e.darkmodeDefault,c=void 0!==t&&t,s=Object(a.useState)(c),n=Object(r.a)(s,2),i=n[0],j=n[1];return Object(p.jsx)(de.a,{children:Object(p.jsx)(Y,{children:Object(p.jsx)(y,{children:Object(p.jsx)(C,{children:Object(p.jsxs)(w.d,{children:[Object(p.jsx)(oe,{exact:!0,path:"/",component:function(){return Object(p.jsxs)("main",{"data-testid":"application",className:i?"darkmode":void 0,children:[Object(p.jsx)(M,{darkMode:i,setDarkMode:j}),Object(p.jsx)(Q,{})]})}}),Object(p.jsx)(le.a,{children:Object(p.jsx)(ue.a,{direction:"column",align:"center",justify:"center",children:Object(p.jsx)(ue.a,{justify:"center",align:"center",w:"100%",h:"93vh",children:Object(p.jsx)(w.b,{path:"/authenticate",children:Object(p.jsx)(ie,{})})})})})]})})})})})};c(130);n.a.render(Object(p.jsx)(be,{}),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.7414ee3b.chunk.js.map